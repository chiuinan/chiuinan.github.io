<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>夢幻麻將館４麻雀傳說</title>
</head>
<body>
<pre style="font-family: MingLiU, monospace; font-size: 16px;">
<b>﻿名稱</b>：夢幻麻將館４麻雀傳說 (中文版)
<b>簡介</b>：伊思儷2002年出品的18禁麻將遊戲，採用台灣16張麻將計台。劇情描寫
      主角追求的女主角被綁架，主角必須參加賭王大賽獲勝來解救她，過程
      中會遇到另五位美女。本系列遊戲從本代開始走向劇情解謎，玩家必須
      動腦找出符合的條件，以開啟相對應的影片，不再只是一成不變的打牌
      挑戰，使得整個娛樂性大幅提高。本遊戲的另一大特點便是採用真人模
      特兒拍攝而成，模特兒的姿色還算可以，只是演技生硬，美中不足，頗
      為可惜。在打牌方面，除了最後的賭王大賽外，其餘的牌戰，電腦都刻
      意讓玩家進張與胡牌，因此要獲勝其實非常容易。只是播放影片無法中
      止，玩家必須耐心看完整段影片才行，這是非常困擾玩家的一個缺點，
      尤其是對於重玩不想再看影片的玩家。雖說如此，整個遊戲還是有它的
      可玩性，尤其它另外提供的小遊戲也非常好玩。
<IMG src="majon4/game1.jpg">

<IMG src="majon4/game2.jpg">
<b>備註</b>：本版已修正賽克絲最後一個影音和梅莉洛影音未播放的問題。
<b>保護</b>：光碟，破解碼不明
<b>備註</b>：若無法播放影音，主要是因為顯示卡的關係。可試著用VMware安裝XP系
      統執行（VirtualBox不行），但VMTools要使用9.3以下的版本，不然遊
      戲畫面會每次漏掉一個，仍然無法正常玩。若播放影音時有聲無影，便
      是缺乏解碼器，須再加裝如K-Lite Codec Pack等影音解碼軟體。
<b>備註</b>：播放影音時勿切換回視窗，會當機。
<b>備註</b>：想保存遊戲影片的人，可以在影片播放時，切到Data\Avi目錄，然後找
      temp.avi檔案備份起來。
<b>檔案</b>：majon4.rar = 賽克絲和梅莉洛影音修正檔，修正內容為：
        賽克絲最後一個影音改在胡牌次數>=15時，在獲勝後播放（每次都會播）。
        梅莉洛影音放在賭王大賽獲勝，且之前未回應吉娜［我也喜歡你］時播放。
<b>修改</b>：play.log全改成01即可觀看所有影片。
<b>修改</b>：存檔save\Save?.dat

位置0013h = 後述8個地點是否第一次進入，每地點1 byte
位置001Ch = 伊思儷學院（伊麗莎）胡牌次數
位置0020h = 比格堡胡牌次數（沒用到）
位置0024h = 嘿咻牛郎城胡牌次數（沒用到）
位置0028h = 吉德堡（吉娜）胡牌次數
位置002Ch = 賭王大賽（梅莉洛）胡牌次數
位置0030h = 到不了港（賽克絲）胡牌次數
位置0024h = （沒用到）
位置0038h = QK雜貨店（葳葳）胡牌次數
位置007Ch = 與吉娜關係度（0～100）
位置0080h = 自己的總錢數與另三家的總錢數，各4 byte
位置0090h = Nami影音1是否尚未播過
位置0091h = 遇Nami影音是否尚未播過
位置0092h = 伊思儷學院影片是否尚未播過，共3 byte
            (對應訊息SA2-26,SA2-33,SA2-40，在MJ.EXE位置03C03Ch)
位置0095h = 吉德堡影片是否尚未播過，共3 byte
            (對應訊息SA3-26,SA3-35,SA3-42，在MJ.EXE位置03C0B8h)
位置0098h = 到不了港影片是否尚未播過，共2 byte
            (對應訊息SA5-20,SA5-29，在MJ.EXE位置03C128h)
位置009Ah = QK雜貨店影片是否尚未播過，共3 byte
            (對應訊息SA1-08,SA1-09,SA1-10,在MJ.EXE位置03C18Ch)

<b>修改</b>：記憶體（和存檔格式相同，包括胡牌次數等資訊）

M1 M1 M1 M1 M2 M2 M2 M2 M3 M3 M3 M3 M4 M4 M4 M4

M1 = 自己的總錢數
M2～M4 = 另三家的總錢數（下家、對家、上家）

<b>修改</b>：

1.到不了港不論勝負都進賭王大賽：
  Data\Msg\MsgCon.idx
    73 61 35 2D 30 34 00 00 00 00 00 00 01
    -- -- -- -- -- -- -- -- -- -- -- -- 00

<b>修改</b>：MJ.exe，略過影片播放

將五個Temp.avi字串（位置3C590h附近）的最後兩個改成其他名稱，然後在avi
子目錄下放置該名稱的短影片，即可縮減影片播放時間。

<b>資訊</b>：

1.訊息控制檔Data\Msg\MsgCon.idx

各組訊息數目：每個4 byte，共8組
控制訊息：每個32 byte

NN NN NN NN NN NN NN NN NN BK FR WN LS BF -- --
WC WC WC WC TW TW TW TW CL CL CL CL MN MN MN MN

NN = 訊息名稱（含00字元），例如sa2-11：
       伊思儷學院 = sa2-??
       比格堡     = sa4-??
       吉德堡     = sa3-??
       賭王大賽   = sa6-??與sa8-??
       到不了港   = sa5-??
       QK雜貨店   = sa1-??
BK = 是否要檢查GameBreak（不明，目前均為0）
FR = 是否須第一次進入
BF = 是否須為第一個顯示的訊息（非接續前面的顯示訊息）
WN = 是否須打牌勝
LS = 是否須打牌輸
WC = 對象必要的胡牌次數
TW = 必要的總胡牌次數
CL = 必要的吉娜關係度
MN = 必須籌碼＜MN（0表不限制）

註：有許多訊息的處理是寫死在程式裡的，特別是賭王大賽，修改此處並無效。

2.訊息資訊檔Data\Msg\Msg.dat

訊息數目：4 byte
訊息資訊：每個58h=88 byte

NN NN NN NN NN NN NN NN NN N0 N0 N0 N0 N0 N0 N0
N0 N0 N1 N1 N1 N1 N1 00 N2 N2 N2 N2 N2 00 N3 N3
N3 N3 N3 00 N4 N4 N4 N4 N4 00 -- -- -- -- -- --
S1 S1 S1 S1 S1 S1 S1 S1 S1 S2 S2 S2 S2 S2 S2 S2
S2 S2 -- -- -- -- -- -- -- -- -- -- -- -- -- --
-- -- -- -- CL CL CL CL

NN = 訊息名稱（含00字元）
N0 = 下個訊息名稱（含00字元）
N1 = 背景圖指示
     (SA???，後面的數字n表示Data\Graphics\Bk.dat第n-1個block，每個96000h byte)
N2 = 前景圖指示
     (B*???，p=*-'A'，後面的數字n表示Data\Graphics\P.dat第p*2+n-1個block，
     每個2EA40h byte)
N3 = 訊息文字指示
     (T*???，p=*-'A'，後面的數字n表示Data\Graphics\Text.dat第p*50h+n-1個block，
     每個CCh byte，每行33h byte)
N4 = 影音指示 (V*???，*表示人物，後面的數字n表示第幾個影片)
S1 = 選擇第一項的下個訊息名稱（含00字元）
S2 = 選擇第二項的下個訊息名稱（含00字元）
ED = 後面是否已經沒有訊息
CL = 增加的吉娜關係度

<b>操作</b>：吃牌時先按吃，再選擇要拿來吃牌的牌後，再按下吃（但有時會誤判不能吃）。

<b>攻略</b>：（作者－青衫）

<font color=blue><b>*** 主線流程</b></font>

1.QK雜貨店（葳葳）：打牌勝的話，（影音）遇Nami，開啟伊思儷學院。
2.伊思儷學院（伊麗莎）：打牌勝的話，開啟吉德堡，影音#1-1。
3.吉德堡（吉娜）：打牌勝的話，開啟比格堡。
4.比格堡：得知Nami被綁架，開啟到不了港。
5.到不了港（賽克絲）：牌局結束時，總錢數少於賽克絲和妮可，便可上船，影音#1-2。
6.參加賭王大賽，連三場勝利後，救下Nami，影音#1-3。若失敗，影音#1-4。

<IMG src="majon4/00.jpg">

<font color=blue><b>*** 其他影音攻略</b></font>

註：未特別標示者，當達到條件時，再次進入該地點即會觸發劇情。

<b>1.QK雜貨店（葳葳）：籌碼須>=8000</b>
<IMG src="majon4/01.jpg">

  胡牌次數>=3，影音#5-3
  胡牌次數>=10，影音#5-2
  胡牌次數>=15，影音#5-1

<b>2.伊思儷學院（伊麗莎）：籌碼須>=10000</b>
<IMG src="majon4/02.jpg">

  胡牌次數>=3，影音#3-1
  胡牌次數>=10，影音#3-2
  胡牌次數>=15，影音#3-3

<b>3.吉德堡（吉娜）：籌碼須>=12000</b>
<IMG src="majon4/03.jpg">

  胡牌次數>=3，影音#2-1
  胡牌次數>=10，影音#2-2
  胡牌次數>=15，到吉德堡回應吉娜［我也喜歡你］，參加賭王大賽獲勝後，影音#2-3

<b>4.到不了港（賽克絲）：籌碼須>=18000</b>
<IMG src="majon4/04.jpg">

  胡牌次數>=3，影音#4-1
  胡牌次數>=10，影音#4-2

<font color=red>影音#4-3在遊戲中無法播放，只能靠修改。</font>

<b>5.梅莉洛</b>

<font color=red>梅莉洛的影音在遊戲中均無法播放，只能靠修改。</font>

<font color=blue><b>*** 小遊戲</b></font>

嘿咻牛郎城可玩小遊戲賺錢。小遊戲全清除的提示：

1.由左邊列開始清起。
2.若上面有相連可清除，且附近垂直列內已無同圖案落單者，可直接清除。
3.橫向相連者優先去除，但要預留幾個給落單者；直向相連者可暫時保留。
4.去除某個圖案即可直向相連時，試著消除下方相連者讓隔壁列相同圖案與其
  相連後去除。
5.實在無法去除者，便保留等右邊幾列的相同圖案來相連清除。

<IMG src="majon4/game3.jpg">

<IMG src="majon4/game4.jpg">

<font color=blue><b>*** 關於無法播放的影音</b></font>

1.賽克絲最後一個影音是放在訊息SA7-01裡，但此訊息並未定義在訊息控制檔
  MsgCon.idx中，也沒在程式中處理，是個無法啟動的訊息，因此無法播放。
2.梅莉洛的三個影音訊息為SA8-03、SA8-04、SA8-05，有定義在MsgCon.idx中，
  其觸動條件也確實為胡牌次數>=3、10、15，但相關處理的程式物件Place5
  卻沒有處理這些訊息的CheckRun函數，而是將賭王大賽的流程直接寫死在程
  式中。於是這些訊息均無法觸動來播放影音。

</pre>
</body>
</html>
