<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>存檔修改</title>
</head>
<body>
<pre>
<font face="細明體" size=3><CENTER><FONT COLOR=FF0000 size=5><b>存檔修改</b></FONT></CENTER>
修改：存檔SAVEGAME\ITEMS_??.BIN

以多個資料區塊集結儲存（故檔案大小與資料位置都不固定），格式為：

  檔頭：1 byte，固定1Ah
  資料區塊：多個，依次存放，以索引值存取

資料區塊格式：

  AA AA BB BB BB BB CC CC [實際資料]

  AA = 資料索引值，在ITEMS_??.BIN中最大為999（3E7h）
  BB = 資料型態值，例如0566h為全隊資料，0559h為人物資料，052Bh為斧頭
  CC = 實際資料byte數

全隊資料（資料型態值=0566h）：

000 1A 00 00 66 05 00 00 0D 01 -- -- -- -- -- -- --
    (... 其他資料 ...)
0E0 -- -- -- -- -- -- -- -- -- -- -- -- -- -- C1 C1
0F0 C2 C2 C3 C3 C4 C4 C5 C5 C6 C6 -- -- P1 P2 P3 P4
100 -- -- -- -- -- -- -- -- -- -- -- -- -- -- GF GF
110 GF GF -- -- -- -- (.......其他區塊資料 .......)

C1～C6：組成隊伍的人物資料索引值，FFFF表沒有
P1～P2：隊伍所在地圖X,Y座標（0～31）
P3：隊伍的面向，0=北方
P4：隊伍所在迷宮層
GF：全隊法術作用旗標
  00000002h = 偵測魔法
  00000200h = 透視術
  00000400h = 祝福術
  00008000h = 祈禱術
  00040000h = 溫暖祝福
  01000000h = 水中呼吸
  02000000h = 凝時術

人物資料（資料型態值=0559h）

2A0 -- -- -- -- 20 00 59 05 00 00 6B 02 -- -- -- --
2B0 -- -- -- -- -- -- PP -- -- -- -- -- -- -- -- --
    (.... 其他資料 ...)
300 -- -- -- -- -- -- -- AA AA AA AA AA AA AA AA AA
310 AA AA AA AA AA AA AA AA AA AA AA AA AA AA AA AA
320 AA AA AA BB BB BB BB BB BB BB BB BB BB BB BB BB
330 BB BB BB BB BB BB BB BB BB BB BB BB BB B1 B1 (.
340 ............... 名字,共20 byte ................
350 .......) C1 C2 C3 -- SS C4 D1 D2 D3 -- -- -- --
360 -- E1 E1 E2 E2 -- -- FF FF G1 G1 G1 G1 G2 G2 G2
370 G2 G3 G3 G3 G3 H1 H2 H3 H4 H5 H6 H7 -- KK KK KK
380 KK LL -- -- -- -- -- -- -- -- -- -- -- -- -- --
    (.... 其他資料 ...)
450 -- -- -- -- -- -- -- -- -- MM MM MM MM MM MM MM
    (... MM ...)
4B0 MM MM MM -- -- -- -- -- -- -- -- -- -- NN NN NN
    (... NN ...)
500 NN NN NN -- -- -- -- -- -- -- -- -- -- -- -- --

PP：人物在隊伍位置，00～05
AA：物品欄物品對應的資料索引值，共14組，每組2 byte
BB：身上物品對應的資料索引值，共13組，依次為護甲、防護腕帶、主手、
    戒指x2、鞋子、副手、腰帶x3、項鍊、頭盔、箭囊第一枝箭（B1=數目）
C1：種族，偶數為男性，奇數為女性
  00～01=人類    02～03=精靈    04～05=半精靈  06～07=矮人
  08～09=侏儒    0A～0B=半身人  0C～0D=妖精    0E～0F=蜥蜴人
C2：職業
  00 = 戰士              01 = 遊俠        02 = 武士
  03 = 巫師              04 = 牧師        05 = 小偷
  06 = 戰士／牧師        07 = 戰士／小偷  08 = 戰士／巫師
  09 = 戰士／巫師／小偷  0A = 小偷／巫師  0B = 牧師／小偷
  0C = 戰士／牧師／巫師  0D = 遊俠／牧師  0E = 牧師／巫師
C3：相片
C4：陣營
SS：狀態值
  02 = 身染劇毒
  04 = 全身麻痺
  08 = 變成化石
D1～D3：各職業等級，最大14h
E1～E2：目前生命／最大生命
FF：食物量，可以超過遊戲最大的64h
G1～G3：各職業經驗值
H1～H7：實際屬性值，依次為力量、力量18的比例值、智能、學問、敏捷、體
        質、魅力
LL：是否變身成老虎（雙手無法拿東西）
KK：個人法術作用旗標
  00000001h = 魔冑術
  00000008h = 魔盾術
  00000010h = 朦朧化身
  00000040h = 隱形術
  00000100h = 強力隱形
  00004000h = 魔法之袍
  00008000h = 百邪不侵
  00010000h = 迅捷術
  00020000h = 抗火術
  00040000h = 抗冰術
  00100000h = 禦火術
  00200000h = 自由移動
  00800000h = 防禦麻痺
  10000000h = 巨力
MM：法師記憶的法術，共90個（每級10個），FF=尚未抄寫，其餘=記憶的數目
NN：牧師祈求的法術，共70個（每級10個），FF=不可用，其餘=祈求的數目

物品資料：

(1)基礎物品，實際資料byte數=12，格式為：

  AA AA B1 B2 B3 B4 CC CC CC CC DD DD

AA = 物品所屬人物、怪物、凹槽的資料索引值，FFFF表在地上
B1～B2 = 物品在地上時的座標，0000或FFFF表已消耗或特殊事件才能得到
B3 = 所在迷宮層
B4 = 同一位置的次序，數字小的在下
CC = 前一枝箭與後一枝箭的資料索引值
DD = 物品狀態
  0800h = 1表示尚未辨識
  0400h = 1表示詛咒
  0020h = 1表示撿起會爆炸粉碎

配合的資料型態值：
  0540 = 開鎖器
  0541 = 魔法書
  0542 = 牧師聖符
  0543 = 糧食
  0544 = 皮靴
  0548 = 裝飾的項鍊
  054D = 強力藥水
  054E = 一般療效的藥水
  054F = 增強療效的藥水（遊戲中仍標示一般療效的藥水）
  0550 = 劇毒的藥水
  0551 = 防止饑餓的藥水
  0552 = 提升速度的藥水
  0553 = 隱形藥水
  0554 = 中和毒性的藥水
  0555 = 裝飾戒指
  0556 = 巫師之戒
  0557 = 維生戒指
  0558 = 輕降戒指
  055F = 武士聖符 
  0575 = 被祝福的聖符
  0578 = 永燃之火把
  057B = 水中呼吸之頭盔
  0580 = 手杖碎片
  0583 = 寶石碎片
  0586 = 復原之杖
  0589 = 弗萊爾隊長的名牌
  058C = 友誼勛章
  0591 = 抗火戒指
  059A = 圖洛布來安之戒
  05AB = 蘋果
  05B0 = 乾糧
  05B3 = 雕像手臂
  05B6 = 石泉壺
  05B9 = 黃金杯
  05BC = 喜悅之杯
  05BF = 香袋
  05C2 = 黑色聖符
  05C5 = 山陵巨人神力之手套
  05C8 = 噴火巨人神力之手套
  05CB = 紅色寶石
  05CE = 藍色寶石
  05D4 = 綠色寶石
  05D7 = 黃色寶石
  05DA = 晨光之球
  05DD = 希望之火
  05E0 = 硬幣
  05F4 = 鑽石
  05F7 = 爪鉤
  05FA = 聖鑰匙
  05FD = 水晶鑰匙
  0600 = 火焰鑰匙
  0603 = 霜之鑰匙
  0606 = 金鑰匙
  0609 = 鐵鑰匙
  060C = 信心之鑰
  060F = 銀鑰匙
  0612 = 黃銅鑰匙
  0615 = 銅鑰匙
  0618 = 石製鑰匙
  061E = 深紅色鑰匙
  0621 = 書:【元素時期】
  0624 = 圖洛布來安之書
  0627 = 卷軸文件
  062A = 物品原形鏡
  06B5 = 燒灼之石

註：某些過關物品，如永燃之火把等，似乎已被地圖記錄其資料索引值，故另
    行創造或修改是無效的。非唯一性的物品，如鑰匙等，修改出的都可正確
    運作。

(2)武器防具，實際資料byte數=13，格式為：

  [12 byte基礎物品資料] CC

CC = 魔法力

配合的資料型態值：
  052B = 斧頭
  052C = 長劍
  052D = 短劍
  052E = 匕首
  052F = 弓
  0530 = 叉矛
  0531 = 三叉戟
  0532 = 狼牙棒
  0533 = 鍊枷
  0534 = 棍杖
  0535 = 投石索
  0536 = 飛鏢
  0537 = 箭
  0538 = 石塊
  0539 = 板條甲
  053A = 鎖子甲
  053B = 頭盔
  053C = 皮甲
  053D = 鎧甲
  053E = 鱗甲
  053F = 盾
  0545 = 長袍
  0546 = 防護戒指
  0547 = 防護腕帶
  0549 = 雙手劍
  054A = 大力王杖
  054B = 護體斗篷
  054C = 綠水晶鎚
  0692 = 長弓
  06A0 = 蜂巢匕首
  06AD = 魔杖
  06B2 = 生命之杖
  06BB = 歐克諾匕首
  06BE = 龍寇匕首
  06CE = 靈之鎚
  06D1 = 魔法劍氣
  06D7 = 凍瘡短劍
  06DA = 蛆蟲短劍
  06E1 = 流星鍊枷
  06E4 = 黑槌子
  06EA = 手擲斧
  06FA = 塞莫客長戟
  06FF = 雷公三叉戟
  0705 = 塞莫客長戟
  071A = 道吉瑪雙手劍
  072F = 精靈鍊甲
  0757 = 太陽面具
  0763 = 板條甲

(3)法術物品，實際資料byte數=15，格式為：

  [12 byte基礎物品資料] CC DD EE

CC = 0表巫師法術，1表牧師法術
DD = 法術編號
EE = 施法剩餘次數（卷軸為1）

配合的資料型態值：
  0560 = 魔杖
  0561 = 卷軸
  0642 = 施法項鍊
</font>
</pre>
</body>
</html>
