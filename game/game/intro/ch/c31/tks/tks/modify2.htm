<html>
<head>
<meta charset="utf-8">
<title>資訊修改</title>
</head>
<body>
<CENTER><FONT COLOR=FF0000 size=5><b>資訊修改</b></FONT></CENTER>
<pre style="font-family: MingLiU, monospace; font-size: 16px;">
<b>修改</b>：人物資訊檔data\man.dat，每位1F8h=504 byte：

0000 是否使用，00表未使用，01表使用
0001 不明
0002 不明，2 byte
0004 目前生命負值（含裝備），4 byte
0008 目前靈感負值（含裝備），4 byte
000C 人物名稱，8 byte
0014 不明x4，各2 byte
001C 不明，4 byte
0020 人物陣營，01=己方，02=敵方，04=友方
0021 不明
0022 不明，各2 byte
0024 最大生命負值（不含裝備），4 byte
0028 最大靈感負值（不含裝備），4 byte
002C 等級，4 byte
0030 升級尚需經驗負值，4 byte
0034 武力負值，4 byte
0038 防禦負值，4 byte
003C 火技負值，4 byte
0040 水技負值，4 byte
0044 巫技負值，4 byte
0048 人技負值，4 byte
004C 火抗負值，4 byte
0050 水抗負值，4 byte
0054 巫抗負值，4 byte
0058 人抗負值，4 byte
005C 不明x4，各4 byte
006C 抗昏迷指數初值（0226h=550為標準，戰場上另行記錄使用），4 byte
0070 抗混亂指數初值（0226h=550為標準，戰場上另行記錄使用），4 byte
0074 抗中毒指數初值（0226h=550為標準，戰場上另行記錄使用），4 byte
0078 抗癱瘓指數初值（0226h=550為標準，戰場上另行記錄使用），4 byte
007C 速度負值，4 byte
0080 好感度負值，4 byte
0084 魅力，4 byte
0088 體力（使用時為負值），4 byte
008C 口才，4 byte
0090 不明x3，各4 byte
009C 攏絡時好感度增幅，4 byte
00A0 武將類型，00=文官，01=武將，02=文武兼備
00A1 不明x3，各1 byte
00A4 短兵技能負值，4 byte
00A8 長兵技能負值，4 byte
00AC 弓箭技能負值，4 byte
00B0 武力學習力，4 byte
00B4 防禦學習力，4 byte
00B8 速度學習力，4 byte
00BC 短兵學習力，4 byte
00C0 長兵學習力，4 byte
00C4 弓箭學習力，4 byte
00C8 使用短兵器攻擊獲得的總經驗值（升級時使用），4 byte
00CC 使用長兵器攻擊獲得的總經驗值（升級時使用），4 byte
00D0 使用弓箭攻擊獲得的總經驗值（升級時使用），4 byte
00D4 武力學習成果（不足1的部份，單位1/100，累計用），4 byte
00D8 防禦學習成果（不足1的部份，單位1/100，累計用），4 byte
00DC 速度學習成果（不足1的部份，單位1/100，累計用），4 byte
00E0 火系學習力，4 byte
00E4 水系學習力，4 byte
00E8 巫系學習力，4 byte
00EC 人系學習力，4 byte
00F0 使用火系法術獲得的總經驗值（升級時使用），4 byte
00F4 使用水系法術獲得的總經驗值（升級時使用），4 byte
00F8 使用巫系法術獲得的總經驗值（升級時使用），4 byte
00FC 使用人系法術獲得的總經驗值（升級時使用），4 byte
0100 不明，4 byte
0104 頭身手飾鞋的裝備編號（-1表沒有），各4 byte
0118 攜帶的裝備編號x8（-1表沒有），各4 byte
0138 已會的法術編號x24（-1表沒有），各4 byte
0198 各法術類別的經驗值x24，各4 byte

<b>修改</b>：裝備資訊檔data\item.dat，每個14Ch=332 byte：

0000 物品名稱
0010 使用的圖像編號
0014 不明x2，各4 byte
001C 不明，2 byte
001E 物品種類，2 byte
       00 = 短兵器  01 = 長兵器    02 = 弓箭  03 = 扇子
       04 = 頭盔    05 = 衣服      06 = 鞋子  07 = 飾品
       08 = 兵書    09 = 錦囊符咒  0A = 道具
0020 起賣回合（0表第1回合），4 byte
0024 生命恢復值，4 byte
0028 靈感恢復值，4 byte
002C 生命上限增加值，4 byte
0030 靈感上限增加值，4 byte
0034 價格，4 byte
0038 錦囊或符咒編號（-1表沒有），4 byte
003C 對應的法術類別（00h～17h，-1表沒有），4 byte
       00 = 火雷計  01 = 火弩計  02 = 火爆計  03 = 火石計
       04 = 雷雨計  05 = 水龍計  06 = 寒冰雹  07 = 洪水陣
       08 = 迷魂劍  09 = 奪魄槍  0A = 百毒霧  0B = 醉人蜂
       0C = 解毒術  0D = 移動術  0E = 回神術  0F = 喚醒術
       10 = 自療術  11 = 醫療術  12 = 鼓舞術  13 = 威嚇術
       14 = 護體術  15 = 卸甲術  16 = 神行術  17 = 遲緩術
0040 武力增加值，4 byte
0044 防禦增加值，4 byte
0048 速度增加值，4 byte
004C 短兵技能增加值，4 byte
0050 長兵技能增加值，4 byte
0054 弓箭技能增加值，4 byte
0058 火技增加值，4 byte
005C 水技增加值，4 byte
0060 巫技增加值，4 byte
0064 人技增加值，4 byte
0068 火抗增加值，4 byte
006C 水抗增加值，4 byte
0070 巫抗增加值，4 byte
0074 人抗增加值，4 byte
0078 不明x4，4 byte
0088 抗昏迷指數增加值，4 byte
008C 抗混亂指數增加值，4 byte
0090 抗中毒指數增加值，4 byte
0094 抗癱瘓指數增加值，4 byte
0098 行動增加值，4 byte
009C 靈感節省%數，4 byte
00A0 口才增加值，4 byte
00A4 魅力增加值，4 byte
00A8 解除的狀態值
       01h = 昏迷
       02h = 混亂
       04h = 中毒
       08h = 癱瘓
00A9 物品簡介
00E9 效果說明

<b>修改</b>：法術資訊檔data\wizard.dat，每個170h=368 byte：

0000 法術名稱
0010 不明
0011 作用對象
       01 = 敵人
       02 = 自己
       06 = 己方
0012 法術型態，2 byte
       00 = 火系    01 = 水系    02 = 巫術    03 = 人術
0014 法術類別（00h～17h），4 byte
       00 = 火雷計  01 = 火弩計  02 = 火爆計  03 = 火石計
       04 = 雷雨計  05 = 水龍計  06 = 寒冰雹  07 = 洪水陣
       08 = 迷魂劍  09 = 奪魄槍  0A = 百毒霧  0B = 醉人蜂
       0C = 解毒術  0D = 移動術  0E = 回神術  0F = 喚醒術
       10 = 自療術  11 = 醫療術  12 = 鼓舞術  13 = 威嚇術
       14 = 護體術  15 = 卸甲術  16 = 神行術  17 = 遲緩術
0018 消耗靈感，4 byte
001C 法術等級（1～5），4 byte
0020 最大距離，2 byte
0022 不明，2 byte
0024 作用範圍，4 byte
0028 生命增加最大值，4 byte
002C 生命增加最小值，4 byte
0030 武力增加%值，4 byte
0034 防禦增加%值，4 byte
0038 速度增加%值，4 byte
003C 有效回合數（-1表立即性），4 byte
0040 抗昏迷指數增加最大值，4 byte
0044 抗混亂指數增加最大值，4 byte
0048 抗中毒指數增加最大值，4 byte
004C 抗癱瘓指數增加最大值，4 byte
0050 抗昏迷指數增加最小值，4 byte
0054 抗混亂指數增加最小值，4 byte
0058 抗中毒指數增加最小值，4 byte
005C 抗癱瘓指數增加最小值，4 byte
0060 不明，4 byte
0064 升級後新的法術編號，-1表無法再升級
0068 效果說明
0168 不明，4 byte
016C 法術類型，4 byte
       00 = 火系
       01 = 水系
       02 = 人術（恢復生命）
       03 = 巫術（中毒、癱瘓）
       04 = 巫術（昏迷、混亂）
       05 = 人術（提升己方屬性）
       06 = 人術（降低敵方屬性）
       07 = 巫術（治療狀態）

<b>修改</b>：戰場敵人資訊檔man\*.dat

敵人數目：4 byte
敵人資訊：每位1F8h=504 byte，格式同人物資訊檔。

<b>修改</b>：地圖圖檔map\???stage.map，???為地圖編號

檔頭：4 byte
水平大小：4 byte
垂直大小：4 byte
圖檔資料：每個像素2 byte，由低到高為BGR資料（各5位元）
移動資料：
  水平大小：4 byte
  垂直大小：4 byte
  移動數值：每個2 byte，對應消耗的行動力，0表不能進入
            001Fh=7，7C1Fh=5，7FE0h=4，03FFh=3，0001=0
高度資料：（座標軸北在右上）
  水平大小：4 byte
  垂直大小：4 byte
  高度數值：每個2 byte
            7C00h=5，7FE0h=4，03FFh=3，7C1Fh=2，7FFFh=1，001F=0

<b>修改</b>：關卡定義檔script\stage.txt，文字檔格式，各關卡定義為：

{
[關卡編號][任務圖示顯示的X,Y位置][回合限制][不明][關卡內容定義檔.stg]
出現條件1
出現條件2
 :
}

各行出現條件都必須成立，關卡才會出現。出現條件可為：

[子條件]               子條件成立時為true
[!子條件]              子條件不成立時為true
[子條件1,子條件2,...]  任一子條件成立時為true

子條件可為：

city(id)               擁有指定id的城池時為true
man(id)                擁有指定id的人物時為true
money&#62;(no)             擁有的金錢數＞no時為true
level&#62;(id,no)          指定id人物的等級＞no時為true
passstage(id)          指定關卡編號完成時為true
trystage(id)           指定關卡編號有進入過為true（不管成功或失敗）
citynum&#60;(id,no)        指定id君主的城池數＜no時為true
turns&#62;(id1,id2,...,no) 佔有城池後n回合，指定id城池若有m個為敵方時，若n*m＞no時為true
stagecountmod(no)      第n回合若n%no=0時為true
stagecount&#62;(no)        距事件完成後no回合時為true

城池ID為：

0=薊   1=晉陽 2=鄴    3=洛陽  4=臨淄  5=下邳 6=譙
7=襄陽 8=成都 9=壽春 10=番禺 11=武威 12=長安

人物ID為：

0=劉備 1=關羽    2=張飛  3=周倉  4=關平  5=廖化  6=趙雲  7=貂蟬
8=徐庶 9=諸葛亮 10=劉禪 11=馬良 12=馬謖 13=馬超 14=姜維 15=龐統

君主ID為：

0=劉備 1=黃巾賊 2=袁紹 3=董卓 4=曹操 5=劉璋 6=孫權 7=孟獲

<b>修改</b>：養成模式突發事件檔data\research.ini，文字檔格式，各事件定義為：

[第幾回合發生][對象人員編號][對象人員是否允用][顯示訊息]
</pre>
</body>
</html>
